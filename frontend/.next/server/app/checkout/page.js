(()=>{var e={};e.id=285,e.ids=[285],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3486:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>d});var r=s(7096),a=s(6132),i=s(7284),n=s.n(i),l=s(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8855)),"d:\\Full Stack Projects\\New Project\\frontend\\src\\app\\checkout\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1268)),"d:\\Full Stack Projects\\New Project\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["d:\\Full Stack Projects\\New Project\\frontend\\src\\app\\checkout\\page.tsx"],m="/checkout/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9918:(e,t,s)=>{Promise.resolve().then(s.bind(s,3727))},3727:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>CheckoutPage});var r=s(784),a=s(9885),i=s(7771),n=s(1440),l=s.n(n),c=s(9158),d=s(1233),o=s(525);let m={createOrder:async e=>{let t=await o.Z.post("/orders",e);return t.data},createRazorpayOrder:async e=>{let t=await o.Z.post("/payments/razorpay/order",{orderId:e});return t.data},verifyRazorpayPayment:async e=>{let t=await o.Z.post("/payments/razorpay/verify",e);return t.data}};var x=s(6594);function CheckoutPage(){let e=(0,i.I0)(),{items:t,total:s}=(0,i.v9)(e=>e.cart),[n,o]=(0,a.useState)(1),[p,u]=(0,a.useState)("online"),[h,y]=(0,a.useState)(!1),[j,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=document.createElement("script");return e.src="https://checkout.razorpay.com/v1/checkout.js",e.onload=()=>b(!0),document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]);let[v,N]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"India"}),[P,w]=(0,a.useState)({cardNumber:"",expiryDate:"",cvv:"",nameOnCard:""}),k=.08*s,C=s>50?0:9.99,_=s+k+C,handlePlaceOrder=async()=>{j?"online"===p?await initiatePayment():(e((0,d.LL)()),o(4)):await createOrder()},createOrder=async()=>{try{y(!0);let s={products:t.map(e=>({product:e.product.id,quantity:e.quantity,options:e.selectedOptions||{}})),shippingAddress:{street:`${v.address}, ${v.city}, ${v.state}`,city:v.city,zip:v.zipCode,country:v.country},paymentMethod:p},r=await m.createOrder(s);g(r._id),"cod"===p?(e((0,d.LL)()),o(4)):await initiatePayment()}catch(e){console.error("Order creation failed:",e),alert("Failed to create order. Please try again.")}finally{y(!1)}},initiatePayment=async()=>{if(j&&f)try{y(!0);let t=await m.createRazorpayOrder(j),s={key:t.key,amount:t.order.amount,currency:t.order.currency,name:"Computer Shop",description:"Purchase from Computer Shop",order_id:t.order.id,handler:async t=>{try{await m.verifyRazorpayPayment({razorpay_order_id:t.razorpay_order_id,razorpay_payment_id:t.razorpay_payment_id,razorpay_signature:t.razorpay_signature}),e((0,d.LL)()),o(4)}catch(e){console.error("Payment verification failed:",e),alert("Payment verification failed. Please contact support.")}},prefill:{name:`${v.firstName} ${v.lastName}`,email:v.email,contact:v.phone},theme:{color:"#3B82F6"}},r=new window.Razorpay(s);r.open()}catch(e){console.error("Payment initiation failed:",e),alert("Failed to initiate payment. Please try again.")}finally{y(!1)}},q=[{id:1,name:"Shipping",completed:n>1},{id:2,name:"Payment Method",completed:n>2},{id:3,name:"Review",completed:n>3},{id:4,name:"Confirmation",completed:n>4}];return 0===t.length&&4!==n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Your cart is empty"}),r.jsx(c.zx,{children:r.jsx(l(),{href:"/",children:"Continue Shopping"})})]})}):r.jsx("main",{className:"min-h-screen py-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center justify-center",children:q.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${e.completed?"bg-green-500 text-white":n===e.id?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:e.completed?"âœ“":e.id}),r.jsx("span",{className:`ml-2 ${n===e.id?"font-semibold":""}`,children:e.name}),t<q.length-1&&r.jsx("div",{className:`w-12 h-0.5 mx-4 ${e.completed?"bg-green-500":"bg-gray-300"}`})]},e.id))})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[1===n&&(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Shipping Information"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(2)},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(c.II,{label:"First Name",value:v.firstName,onChange:e=>N({...v,firstName:e}),required:!0}),r.jsx(c.II,{label:"Last Name",value:v.lastName,onChange:e=>N({...v,lastName:e}),required:!0})]}),r.jsx(c.II,{type:"email",label:"Email",value:v.email,onChange:e=>N({...v,email:e}),required:!0}),r.jsx(c.II,{type:"tel",label:"Phone",value:v.phone,onChange:e=>N({...v,phone:e}),required:!0}),r.jsx(c.II,{label:"Address",value:v.address,onChange:e=>N({...v,address:e}),required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(c.II,{label:"City",value:v.city,onChange:e=>N({...v,city:e}),required:!0}),r.jsx(c.II,{label:"State",value:v.state,onChange:e=>N({...v,state:e}),required:!0}),r.jsx(c.II,{label:"ZIP Code",value:v.zipCode,onChange:e=>N({...v,zipCode:e}),required:!0})]}),r.jsx(c.zx,{type:"submit",size:"lg",className:"w-full",children:"Continue to Payment"})]})]}),2===n&&(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Payment Method"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(3)},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"online",name:"paymentMethod",type:"radio",value:"online",checked:"online"===p,onChange:e=>u(e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),r.jsx("label",{htmlFor:"online",className:"ml-3 block text-sm font-medium text-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{children:"Online Payment (Razorpay)"}),r.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"Pay securely with credit/debit card, UPI, net banking"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"cod",name:"paymentMethod",type:"radio",value:"cod",checked:"cod"===p,onChange:e=>u(e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),r.jsx("label",{htmlFor:"cod",className:"ml-3 block text-sm font-medium text-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{children:"Cash on Delivery (COD)"}),r.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"Pay when you receive your order"})]})})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx(c.zx,{type:"button",variant:"secondary",onClick:()=>o(1),className:"flex-1",children:"Back"}),r.jsx(c.zx,{type:"submit",size:"lg",className:"flex-1",children:"Review Order"})]})]})]}),3===n&&(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Review Your Order"}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Items"}),r.jsx("div",{className:"space-y-4",children:t.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.product.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]}),r.jsx("p",{className:"font-medium",children:(0,x.T)(e.product.price*e.quantity)})]},e.product.id))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Shipping Address"}),(0,r.jsxs)("p",{children:[v.firstName," ",v.lastName]}),r.jsx("p",{children:v.address}),(0,r.jsxs)("p",{children:[v.city,", ",v.state," ",v.zipCode]}),r.jsx("p",{children:v.email}),r.jsx("p",{children:v.phone})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Payment Method"}),r.jsx("p",{className:"capitalize",children:"online"===p?"Online Payment (Razorpay)":"Cash on Delivery"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx(c.zx,{type:"button",variant:"secondary",onClick:()=>o(2),className:"flex-1",children:"Back"}),r.jsx(c.zx,{onClick:handlePlaceOrder,size:"lg",className:"flex-1",disabled:h,children:h?"Processing...":"online"===p?"Pay Now":"Place Order"})]})]}),4===n&&(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6 text-center",children:[r.jsx("div",{className:"mb-6",children:r.jsx("svg",{className:"mx-auto h-16 w-16 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your order. You'll receive a confirmation email shortly."}),r.jsx(c.zx,{size:"lg",children:r.jsx(l(),{href:"/",children:"Continue Shopping"})})]})]}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6 sticky top-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:(0,x.T)(s)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Shipping:"}),r.jsx("span",{children:0===C?"Free":(0,x.T)(C)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax:"}),r.jsx("span",{children:(0,x.T)(k)})]})]}),r.jsx("hr",{className:"my-4"}),(0,r.jsxs)("div",{className:"flex justify-between text-xl font-semibold",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:(0,x.T)(_)})]})]})})]})]})})}},8855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var r=s(5153);let a=(0,r.createProxy)(String.raw`d:\Full Stack Projects\New Project\frontend\src\app\checkout\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,c=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[576,451,551,113,158,525],()=>__webpack_exec__(3486));module.exports=s})();